var devices = [
    {
        name:"客厅电视",
        commands:ko.observableArray([
            {
                label:"开机",
                value:"4604,4444,646,488,644,1624,646,1622,646,1622,644,488,646,488,644,488,646,488,646,488,646,1622,646,1624,644,1622,646,488,644,490,644,488,644,490,644,490,644,490,644,1624,644,1622,644,490,644,488,644,490,646,488,646,1622,648,1618,646,486,648,486,648,1620,672,1596,648,1618,650,1620,646,46524,4606,4440,646,1620,646",
            },
        ]),
    },
    {
        name:"客厅机顶盒",
        commands:ko.observableArray([
        ]),
    },
    {
        name:"空调",
        commands:[
        {
            label:"开关",
            value:"9050,4428,610,1606,610,1608,610,484,610,486,608,486,612,486,608,486,610,1606,610,486,610,1608,610,1608,610,486,608,486,586,510,586,510,586,508,586,1632,588,1630,588,1630,586,508,588,1630,588,508,586,508,588,508,610,1606,614,484,586,508,588,508,588,1630,612,1606,612,1604,616,482,612,480,614,482,614,482,614,480,616,480,616,478,616,478,618,478,616,478,616,478,618,478,616,478,616,478,618,478,618,478,616,478,618,7898,616,480,614,480,616,480,612,482,614,482,614,482,612,482,614,1604,610,484,612,484,610,484,612,484,610,484,612,484,610,484,610,484,610,486,610,486,610,486,610,486,610,486,610,484,610,484,610,486,610,484,608,486,608,486,608,486,608,488,608,486,608,488,608,488,608,488,608,486,608,486,608,488,606,488,606,1612,606,488,606,488,606,488,606,490,606,490,606,490,606,490,606,488,606,488,606,488,608,490,604,490,606,490,606,490,604,490,604,492,604,492,604,512,582,514,582,1636,580,1638,560,534,556,538,556,538,556,1664,554,1662,556,7962,554,542,554,542,552,544,552,544,552,544,552,544,550,544,550,544,552,1666,552,544,552,1666,552,544,550,544,550,1668,552,544,550,544,550,544,552,544,550,544,550,544,552,544,550,546,550,546,550,546,550,544,550,546,550,544,550,544,550,546,550,546,550,546,550,544,550,546,548,546,550,546,550,546,550,1668,548,1670,548,546,550,546,548,1670,548,546,548,1670,548,548,546,1694,524,548,548,570,524,570,524,572,524,570,524,570,524,570,524,570,526,570,524,572,524,570,524",
        }
        ]
    }
]
jQuery(document).ready(function(){
    var content = '<ul data-bind="foreach: devices" class="devices"> \
    <li> \
        <b data-bind="text: name"></b> \
        <ul data-bind="foreach: commands" class="commands"> \
            <li> \
            <a href="javascript:void(0)" class="commands-item" data-bind="attr: {data:value},text:label"> </a> \
            </li> \
        </ul> \
    </li> \
</ul>'
        jQuery('#content').html(content);
        jQuery('#loading').hide();
        
        ko.applyBindings({devices:devices}, document.getElementById("content"));

        jQuery(".commands-item").click(function(){
            console.log(this);
            jQuery.get("/ir?code="+jQuery(this).attr("data"),function(res){
                console.log(res);
            })
            
        })
})